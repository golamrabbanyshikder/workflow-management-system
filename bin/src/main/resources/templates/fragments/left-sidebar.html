<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Left Sidebar</title>
</head>
<body>

<!-- Left Sidebar Fragment -->
<div th:fragment="leftSidebar">
    <!-- Sidebar -->
    <nav id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand">
                <i class="fas fa-tasks me-2"></i>
                <span>Workflow</span>
            </div>
            <button id="sidebarToggle" class="sidebar-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <div class="sidebar-content">
            <!-- User Profile Section -->
            <div class="user-profile">
                <div class="user-avatar">
                    <i class="fas fa-user-circle fa-3x"></i>
                </div>
                <div class="user-info">
                    <div class="user-name" sec:authentication="name">User Name</div>
                    <div class="user-role">
                        <span sec:authorize="hasRole('ROLE_CEO')">CEO</span>
                        <span sec:authorize="hasRole('ROLE_DEPARTMENT_HEAD')">Department Head</span>
                        <span sec:authorize="hasRole('ROLE_TEAM_LEAD')">Team Lead</span>
                        <span sec:authorize="hasRole('ROLE_EMPLOYEE')">Employee</span>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Menu -->
            <ul class="sidebar-nav">
                <!-- Dashboard -->
                <li class="nav-item">
                    <a th:href="@{/dashboard}" class="nav-link" th:classappend="${#request.requestURI == '/dashboard' ? 'active' : ''}">
                        <i class="fas fa-tachometer-alt me-3"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                
                <!-- Workflows -->
                <li class="nav-item">
                    <a th:href="@{/workflows}" class="nav-link" th:classappend="${#strings.startsWith(#request.requestURI, '/workflows') ? 'active' : ''}">
                        <i class="fas fa-project-diagram me-3"></i>
                        <span>Workflows</span>
                    </a>
                </li>
                
                <!-- Tasks with Submenu -->
                <li class="nav-item">
                    <a href="#taskSubmenu" class="nav-link" data-bs-toggle="collapse" th:classappend="${#strings.startsWith(#request.requestURI, '/tasks') ? 'active' : ''}">
                        <i class="fas fa-tasks me-3"></i>
                        <span>Tasks</span>
                        <i class="fas fa-chevron-down ms-auto"></i>
                    </a>
                    <div class="collapse" id="taskSubmenu">
                        <ul class="sub-menu">
                            <li>
                                <a th:href="@{/tasks}" class="nav-link sub-link">
                                    <i class="fas fa-list me-3"></i>
                                    <span>All Tasks</span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{/tasks/my-tasks}" class="nav-link sub-link">
                                    <i class="fas fa-user-check me-3"></i>
                                    <span>My Tasks</span>
                                </a>
                            </li>
                            <li sec:authorize="hasAnyRole('ROLE_CEO', 'ROLE_DEPARTMENT_HEAD', 'ROLE_TEAM_LEAD')">
                                <a th:href="@{/tasks/create}" class="nav-link sub-link">
                                    <i class="fas fa-plus me-3"></i>
                                    <span>Create Task</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                
                <!-- Teams -->
                <li class="nav-item" sec:authorize="hasAnyRole('ROLE_CEO', 'ROLE_DEPARTMENT_HEAD', 'ROLE_TEAM_LEAD')">
                    <a th:href="@{/teams}" class="nav-link" th:classappend="${#strings.startsWith(#request.requestURI, '/teams') ? 'active' : ''}">
                        <i class="fas fa-users me-3"></i>
                        <span>Teams</span>
                    </a>
                </li>
                
                <!-- Departments -->
                <li class="nav-item" sec:authorize="hasAnyRole('ROLE_CEO', 'ROLE_DEPARTMENT_HEAD')">
                    <a th:href="@{/departments}" class="nav-link" th:classappend="${#strings.startsWith(#request.requestURI, '/departments') ? 'active' : ''}">
                        <i class="fas fa-building me-3"></i>
                        <span>Departments</span>
                    </a>
                </li>
                
                <!-- Users -->
                <li class="nav-item" sec:authorize="hasAnyRole('ROLE_CEO', 'ROLE_DEPARTMENT_HEAD')">
                    <a th:href="@{/users}" class="nav-link" th:classappend="${#strings.startsWith(#request.requestURI, '/users') ? 'active' : ''}">
                        <i class="fas fa-user-friends me-3"></i>
                        <span>Users</span>
                    </a>
                </li>
                
                <!-- Roles -->
                <li class="nav-item" sec:authorize="hasAnyRole('ROLE_CEO', 'ROLE_DEPARTMENT_HEAD')">
                    <a th:href="@{/roles}" class="nav-link" th:classappend="${#strings.startsWith(#request.requestURI, '/roles') ? 'active' : ''}">
                        <i class="fas fa-user-tag me-3"></i>
                        <span>Roles</span>
                    </a>
                </li>
                
                <!-- Reports -->
                <li class="nav-item">
                    <a th:href="@{/reports}" class="nav-link" th:classappend="${#strings.startsWith(#request.requestURI, '/reports') ? 'active' : ''}">
                        <i class="fas fa-chart-bar me-3"></i>
                        <span>Reports</span>
                    </a>
                </li>
                
                <!-- Settings -->
                <li class="nav-item">
                    <a th:href="@{/settings}" class="nav-link" th:classappend="${#strings.startsWith(#request.requestURI, '/settings') ? 'active' : ''}">
                        <i class="fas fa-cog me-3"></i>
                        <span>Settings</span>
                    </a>
                </li>
            </ul>
            
            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="section-title">Quick Actions</div>
                <div class="action-buttons">
                    <button class="action-btn" data-bs-toggle="tooltip" title="Create Task" sec:authorize="hasAnyRole('ROLE_CEO', 'ROLE_DEPARTMENT_HEAD', 'ROLE_TEAM_LEAD')">
                        <i class="fas fa-plus-circle"></i>
                    </button>
                    <button class="action-btn" data-bs-toggle="tooltip" title="Notifications">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </button>
                    <button class="action-btn" data-bs-toggle="tooltip" title="Help">
                        <i class="fas fa-question-circle"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
</div>

</body>
</html>